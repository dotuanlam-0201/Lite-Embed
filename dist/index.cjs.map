{"version":3,"file":"index.cjs","sources":["../src/lite-youtube.ts"],"sourcesContent":["export class LiteYouTube extends HTMLElement {\n  private videoId: string = '';\n  private isWarmed: boolean = false;\n\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.videoId = this.getAttribute('videoId') || '';\n    this.renderPreview();\n    this.setupObserver();\n    this.addEventListener('click', this.addIframe, { once: true });\n  }\n\n  renderPreview() {\n    const shadow = this.attachShadow({ mode: 'open' })\n    shadow.innerHTML = `<style>\n        :host { display: block; cursor: pointer; position: relative; background: #000; }\n        .play-btn { width: 68px; height: 48px; background: red; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 12%; }\n      </style>\n      <div id=\"container\">\n        <img src=\"https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg\" alt=\"Video thumbnail\" loading=\"lazy\" />\n        <div class=\"play-btn\"></div>\n      </div>`\n  }\n\n  private setupObserver() {\n    const observer = new IntersectionObserver((entries) => {\n      if (entries[0].isIntersecting) {\n        this.warmConnections();\n        observer.disconnect();\n      }\n    }, { rootMargin: '200px' });\n    observer.observe(this);\n  }\n\n  private warmConnections() {\n    if (this.isWarmed) return;\n    this.isWarmed = true\n    const link = document.createElement('link');\n    link.rel = 'preconnect';\n    link.href = 'https://www.youtube-nocookie.com';\n    document.head.appendChild(link);\n  }\n\n  private addIframe() {\n    const iframe = document.createElement(\"iframe\")\n    iframe.width = \"600\";\n    iframe.height = \"400\";\n    iframe.src = `https://www.youtube.com/embed/${this.videoId}`\n    iframe.allowFullscreen = true;\n    iframe.allow = \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; web-share\";\n    this.shadowRoot?.appendChild(iframe)\n  }\n\n}\n\nif (!customElements.get('lite-youtube')) {\n  customElements.define('lite-youtube', LiteYouTube);\n}"],"names":[],"mappings":";;AAAM,MAAO,WAAY,SAAQ,WAAW,CAAA;IAClC,OAAO,GAAW,EAAE,CAAC;IACrB,QAAQ,GAAY,KAAK,CAAC;AAElC,IAAA,WAAA,GAAA;AACE,QAAA,KAAK,EAAE,CAAC;KACT;IACD,iBAAiB,GAAA;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QAClD,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;KAChE;IAED,aAAa,GAAA;AACX,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;QAClD,MAAM,CAAC,SAAS,GAAG,CAAA;;;;;AAKoB,yCAAA,EAAA,IAAI,CAAC,OAAO,CAAA;;aAE1C,CAAA;KACV;IAEO,aAAa,GAAA;QACnB,MAAM,QAAQ,GAAG,IAAI,oBAAoB,CAAC,CAAC,OAAO,KAAI;AACpD,YAAA,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE;gBAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,QAAQ,CAAC,UAAU,EAAE,CAAC;aACvB;AACH,SAAC,EAAE,EAAE,UAAU,EAAE,OAAO,EAAE,CAAC,CAAC;AAC5B,QAAA,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACxB;IAEO,eAAe,GAAA;QACrB,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;QACpB,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAC5C,QAAA,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC;AACxB,QAAA,IAAI,CAAC,IAAI,GAAG,kCAAkC,CAAC;AAC/C,QAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACjC;IAEO,SAAS,GAAA;QACf,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;AAC/C,QAAA,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;AACrB,QAAA,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,MAAM,CAAC,GAAG,GAAG,CAAA,8BAAA,EAAiC,IAAI,CAAC,OAAO,EAAE,CAAA;AAC5D,QAAA,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC;AAC9B,QAAA,MAAM,CAAC,KAAK,GAAG,oFAAoF,CAAC;AACpG,QAAA,IAAI,CAAC,UAAU,EAAE,WAAW,CAAC,MAAM,CAAC,CAAA;KACrC;AAEF,CAAA;AAED,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;AACvC,IAAA,cAAc,CAAC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;AACrD;;;;"}